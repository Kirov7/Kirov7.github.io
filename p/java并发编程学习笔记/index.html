<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='JavaÂ§öÁ∫øÁ®ãÂ≠¶‰π†ÊÄªÁªìËÆ∞ÂΩï'>
<title>JavaÂπ∂ÂèëÁºñÁ®ãÂ≠¶‰π†Á¨îËÆ∞</title>

<link rel='canonical' href='https://Kirov7.github.io/p/java%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/'>

<link rel="stylesheet" href="/scss/style.min.8191399262444ab68b72a18c97392f5349be20a1615d77445be51e974c144cff.css"><meta property='og:title' content='JavaÂπ∂ÂèëÁºñÁ®ãÂ≠¶‰π†Á¨îËÆ∞'>
<meta property='og:description' content='JavaÂ§öÁ∫øÁ®ãÂ≠¶‰π†ÊÄªÁªìËÆ∞ÂΩï'>
<meta property='og:url' content='https://Kirov7.github.io/p/java%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/'>
<meta property='og:site_name' content='Êû´ÈòøÈõ®&#39;s Blog'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='JavaÂπ∂Âèë' /><meta property='article:published_time' content='2021-11-17T00:00:00&#43;00:00'/><meta property='article:modified_time' content='2021-11-17T00:00:00&#43;00:00'/>
<meta name="twitter:title" content="JavaÂπ∂ÂèëÁºñÁ®ãÂ≠¶‰π†Á¨îËÆ∞">
<meta name="twitter:description" content="JavaÂ§öÁ∫øÁ®ãÂ≠¶‰π†ÊÄªÁªìËÆ∞ÂΩï">
    <link rel="shortcut icon" href="https://img-1307890592.cos.ap-chengdu.myqcloud.com/common%2Ficon.png" />

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-232146632-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="ÂàáÊç¢ËèúÂçï">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_huda4b8bed965e70c74cf5fa7e4b4f3c06_1003367_300x0_resize_box_3.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">üåè</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">Êû´ÈòøÈõ®&#39;s Blog</a></h1>
            <h2 class="site-description">&lt;CrazyForCode&gt;</h2>
        </div>
    </header><ol class="social-menu">
            
                <li>
                    <a 
                        href='https://github.com/Kirov7'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>‰∏ªÈ°µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/%E5%85%B3%E4%BA%8E/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>ÂÖ≥‰∫é</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archives</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        
        
        <li >
            <a href='/links/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>Links</span>
            </a>
        </li>
        

        <div class="menu-bottom-section">
                <li id="i18n-switch">  
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M4 5h7" />
  <path d="M9 3v2c0 4.418 -2.239 8 -5 8" />
  <path d="M5 9c-.003 2.144 2.952 3.908 6.7 4" />
  <path d="M12 20l4 -9l4 9" />
  <path d="M19.1 18h-6.2" />
</svg>



                    <select name="language" onchange="window.location.href = this.selectedOptions[0].value">
                        
                            <option value="https://Kirov7.github.io/en/" >English</option>
                        
                            <option value="https://Kirov7.github.io/" selected>‰∏≠Êñá</option>
                        
                    </select>
                </li>
            
            
            
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>ÊöóËâ≤Ê®°Âºè</span>
                </li>
            
        </div>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">ÁõÆÂΩï</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#java-ÂàõÂª∫Á∫øÁ®ãÁöÑ‰∏âÁßçÊñπÂºè">Java ÂàõÂª∫Á∫øÁ®ãÁöÑ‰∏âÁßçÊñπÂºè</a>
      <ol>
        <li><a href="#1-ÁªßÊâøthreadÁ±ªÂàõÂª∫Á∫øÁ®ã">1. ÁªßÊâøThreadÁ±ªÂàõÂª∫Á∫øÁ®ã</a></li>
        <li><a href="#2-ÂÆûÁé∞runnableÊé•Âè£ÂàõÂª∫Á∫øÁ®ã">2. ÂÆûÁé∞RunnableÊé•Âè£ÂàõÂª∫Á∫øÁ®ã</a></li>
        <li><a href="#3-‰ΩøÁî®callableÂíåfutureÂàõÂª∫Á∫øÁ®ã">3. ‰ΩøÁî®CallableÂíåFutureÂàõÂª∫Á∫øÁ®ã</a></li>
      </ol>
    </li>
    <li><a href="#synchronizedÁöÑ‰ΩøÁî®Âú∫ÊôØ">synchronizedÁöÑ‰ΩøÁî®Âú∫ÊôØ</a></li>
    <li><a href="#Á∫øÁ®ãÁöÑ‰∫îÁßçÁä∂ÊÄÅ">Á∫øÁ®ãÁöÑ‰∫îÁßçÁä∂ÊÄÅ</a></li>
    <li><a href="#Ê≠ªÈîÅ">Ê≠ªÈîÅ</a>
      <ol>
        <li><a href="#Ëß£ÂÜ≥Ê≠ªÈîÅÊúÄÊ†πÊú¨ÁöÑÂª∫ËÆÆÊòØ">Ëß£ÂÜ≥Ê≠ªÈîÅÊúÄÊ†πÊú¨ÁöÑÂª∫ËÆÆÊòØÔºö</a></li>
      </ol>
    </li>
    <li><a href="#Á∫øÁ®ãÂÆâÂÖ®">Á∫øÁ®ãÂÆâÂÖ®</a>
      <ol>
        <li><a href="#Á∫øÁ®ãÂÆâÂÖ®-1">Á∫øÁ®ãÂÆâÂÖ®</a></li>
        <li><a href="#Á∫øÁ®ã‰∏çÂÆâÂÖ®">Á∫øÁ®ã‰∏çÂÆâÂÖ®</a></li>
        <li><a href="#Âàó‰∏æÁ∫øÁ®ãÂÆâÂÖ®‰∏é‰∏çÂÆâÂÖ®ÁöÑÁ±ª">Âàó‰∏æÁ∫øÁ®ãÂÆâÂÖ®‰∏é‰∏çÂÆâÂÖ®ÁöÑÁ±ª</a></li>
      </ol>
    </li>
    <li><a href="#threadpool-Á∫øÁ®ãÊ±†">ThreadPool Á∫øÁ®ãÊ±†</a>
      <ol>
        <li><a href="#new-thread-ÁöÑÂºäÁ´Ø">new Thread() ÁöÑÂºäÁ´Ø</a></li>
        <li><a href="#threadpool-Á∫øÁ®ãÊ±†-1">ThreadPool Á∫øÁ®ãÊ±†</a></li>
        <li><a href="#Á∫øÁ®ãÊ±†ÁöÑÁßçÁ±ª">Á∫øÁ®ãÊ±†ÁöÑÁßçÁ±ª</a></li>
      </ol>
    </li>
    <li><a href="#countdownlatch-ÂÄíËÆ°Êó∂ÈîÅ">CountDownLatch ÂÄíËÆ°Êó∂ÈîÅ</a>
      <ol>
        <li><a href="#cdlÊâßË°åÂéüÁêÜ">CDLÊâßË°åÂéüÁêÜ</a></li>
      </ol>
    </li>
    <li><a href="#semaphore-‰ø°Âè∑Èáè">Semaphore ‰ø°Âè∑Èáè</a></li>
    <li><a href="#cyclicbarrier-Âæ™ÁéØÂ±èÈöú">CyclicBarrier Âæ™ÁéØÂ±èÈöú</a>
      <ol>
        <li><a href="#cyclicbarrier-Â∫îÁî®Âú∫ÊôØ">CyclicBarrier Â∫îÁî®Âú∫ÊôØ</a></li>
      </ol>
    </li>
    <li><a href="#reentrantlock-ÈáçÂÖ•ÈîÅ">ReentrantLock ÈáçÂÖ•ÈîÅ</a></li>
    <li><a href="#condition-Á≠âÂæÖ‰∏éÂî§ÈÜí">Condition Á≠âÂæÖ‰∏éÂî§ÈÜí</a>
      <ol>
        <li><a href="#conditionÊ†∏ÂøÉÊñπÊ≥ï">ConditionÊ†∏ÂøÉÊñπÊ≥ï</a></li>
      </ol>
    </li>
    <li><a href="#callable--future">Callable &amp; Future</a></li>
    <li><a href="#juc-Âπ∂ÂèëÂÆπÂô®">JUC Âπ∂ÂèëÂÆπÂô®</a>
      <ol>
        <li><a href="#copyonwritearraylist-Âπ∂ÂèëÂéüÁêÜ">CopyOnWriteArrayList Âπ∂ÂèëÂéüÁêÜ</a></li>
        <li><a href="#concurrenthashmap">ConcurrentHashMap</a></li>
      </ol>
    </li>
    <li><a href="#atomic-ÂåÖ--cas-ÁÆóÊ≥ï">Atomic ÂåÖ &amp; CAS ÁÆóÊ≥ï</a>
      <ol>
        <li><a href="#ÂéüÂ≠êÊÄß">ÂéüÂ≠êÊÄß</a></li>
        <li><a href="#atomic-ÂåÖ">Atomic ÂåÖ</a></li>
        <li><a href="#cas-ÁÆóÊ≥ï">CAS ÁÆóÊ≥ï</a></li>
        <li><a href="#atomicÁöÑÂ∫îÁî®Âú∫ÊôØ">AtomicÁöÑÂ∫îÁî®Âú∫ÊôØ</a></li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/java/" >
                Java
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/java%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">JavaÂπ∂ÂèëÁºñÁ®ãÂ≠¶‰π†Á¨îËÆ∞</a>
        </h2>
    
        
        <h3 class="article-subtitle">
            JavaÂ§öÁ∫øÁ®ãÂ≠¶‰π†ÊÄªÁªìËÆ∞ÂΩï
        </h3>
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Nov 17, 2021</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    ÈòÖËØªÊó∂Èïø: 16 ÂàÜÈíü
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h1 id="javaÂπ∂ÂèëÁºñÁ®ãÂ≠¶‰π†Á¨îËÆ∞">JavaÂπ∂ÂèëÁºñÁ®ãÂ≠¶‰π†Á¨îËÆ∞</h1>
<h2 id="java-ÂàõÂª∫Á∫øÁ®ãÁöÑ‰∏âÁßçÊñπÂºè">Java ÂàõÂª∫Á∫øÁ®ãÁöÑ‰∏âÁßçÊñπÂºè</h2>
<p>ÂÖàÁúã‰∏ÄÁúãÂú®<code>Thread</code>Á±ªÊ∫êÁ†Å‰∏≠ÁöÑÊ≥®ÈáäÊòØÊÄé‰πàÂÜôÁöÑ</p>
<p>There are two ways to create a new thread of execution. One is to declare a class to be a subclass of Thread. This subclass should override the run method of class Thread. An instance of the subclass can then be allocated and started. For example, a thread that computes primes larger than a stated value could be written as follows:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">   <span class="kd">class</span> <span class="nc">PrimeThread</span> <span class="kd">extends</span> <span class="n">Thread</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">       <span class="kt">long</span> <span class="n">minPrime</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">       <span class="n">PrimeThread</span><span class="o">(</span><span class="kt">long</span> <span class="n">minPrime</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">           <span class="k">this</span><span class="o">.</span><span class="na">minPrime</span> <span class="o">=</span> <span class="n">minPrime</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">       <span class="o">}</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">       <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">           <span class="c1">// compute primes larger than minPrime
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="o">.</span> <span class="o">.</span> <span class="o">.</span>
</span></span><span class="line"><span class="cl">       <span class="o">}</span>
</span></span><span class="line"><span class="cl">   <span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>The following code would then create a thread and start it running:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">	<span class="n">PrimeThread</span> <span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PrimeThread</span><span class="o">(</span><span class="n">143</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">p</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>The other way to create a thread is to declare a class that implements the Runnable interface. That class then implements the run method. An instance of the class can then be allocated, passed as an argument when creating Thread, and started. The same example in this other style looks like the following:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">   <span class="kd">class</span> <span class="nc">PrimeRun</span> <span class="kd">implements</span> <span class="n">Runnable</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">       <span class="kt">long</span> <span class="n">minPrime</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">       <span class="n">PrimeRun</span><span class="o">(</span><span class="kt">long</span> <span class="n">minPrime</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">           <span class="k">this</span><span class="o">.</span><span class="na">minPrime</span> <span class="o">=</span> <span class="n">minPrime</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">       <span class="o">}</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">       <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">           <span class="c1">// compute primes larger than minPrime
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="o">.</span> <span class="o">.</span> <span class="o">.</span>
</span></span><span class="line"><span class="cl">       <span class="o">}</span>
</span></span><span class="line"><span class="cl">   <span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>The following code would then create a thread and start it running:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">       <span class="n">PrimeRun</span> <span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PrimeRun</span><span class="o">(</span><span class="n">143</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">       <span class="k">new</span> <span class="n">Thread</span><span class="o">(</span><span class="n">p</span><span class="o">).</span><span class="na">start</span><span class="o">();</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Every thread has a name for identification purposes. More than one thread may have the same name. If a name is not specified when a thread is created, a new name is generated for it.</p>
<h3 id="1-ÁªßÊâøthreadÁ±ªÂàõÂª∫Á∫øÁ®ã">1. ÁªßÊâøThreadÁ±ªÂàõÂª∫Á∫øÁ®ã</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">lab1</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÁ∫øÁ®ã
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">Runner</span> <span class="n">person01</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Runner</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//ÁªôÁ∫øÁ®ãÂëΩÂêç
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">person01</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">&#34;PERSON01&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//ÂêØÂä®Á∫øÁ®ã
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">        <span class="n">Runner</span> <span class="n">person02</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Runner</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">person02</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">&#34;PERSON02&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">person01</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">person02</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">Runner</span> <span class="kd">extends</span> <span class="n">Thread</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">Integer</span> <span class="n">speed</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Random</span><span class="o">().</span><span class="na">nextInt</span><span class="o">(</span><span class="n">100</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">100</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="n">1000</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;Â∑≤ÂâçËøõ&#34;</span> <span class="o">+</span> <span class="o">(</span><span class="n">i</span> <span class="o">*</span> <span class="n">speed</span><span class="o">)</span> <span class="o">+</span> <span class="s">&#34;Á±≥(&#34;</span> <span class="o">+</span> <span class="n">speed</span> <span class="o">+</span><span class="s">&#34;Á±≥/Áßí)&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>Ê≠§Êó∂Âú®ËøôÊÆµJavaÁ®ãÂ∫è‰∏≠ÊúâÂì™Âá†‰∏™Á∫øÁ®ã?</p>
</blockquote>
<ol>
<li>‰∏ªÁ∫øÁ®ã</li>
<li>PERSON01Á∫øÁ®ã</li>
<li>PERSON02Á∫øÁ®ã</li>
<li><font color =red>ÂûÉÂúæÂõûÊî∂ÁõëÂê¨Á∫øÁ®ã</font></li>
</ol>
<p>Âç≥JavaÂú®ËøêË°åÊó∂Ê∞∏Ëøú‰∏ç‰ºöÊòØÂçï‰∏ÄÁöÑÁ∫øÁ®ã</p>
<h3 id="2-ÂÆûÁé∞runnableÊé•Âè£ÂàõÂª∫Á∫øÁ®ã">2. ÂÆûÁé∞RunnableÊé•Âè£ÂàõÂª∫Á∫øÁ®ã</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">lab2</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">Runner02</span> <span class="n">person03</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Runner02</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">Thread</span> <span class="n">thread03</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Thread</span><span class="o">(</span><span class="n">person03</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">thread03</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">&#34;PERSON03&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">Thread</span> <span class="n">person04</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Thread</span><span class="o">(</span><span class="k">new</span> <span class="n">Runner02</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">        <span class="n">person04</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">&#34;PERSON04&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">new</span> <span class="n">Thread</span><span class="o">(</span><span class="k">new</span> <span class="n">Runner02</span><span class="o">()).</span><span class="na">start</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">thread03</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">person04</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">Runner02</span> <span class="kd">implements</span> <span class="n">Runnable</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">Integer</span> <span class="n">speed</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Random</span><span class="o">().</span><span class="na">nextInt</span><span class="o">(</span><span class="n">100</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">100</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="n">1000</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="c1">//Thread.currentThread().getName() Áî®‰∫éËé∑ÂèñÂΩìÂâçÊâßË°åÁöÑÁ∫øÁ®ãÂØπË±°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="c1">//Âú® Runnable ‰∏≠ÊòØÊó†Ê≥ï‰ΩøÁî® this Ëé∑ÂèñÂà∞ÂΩìÂâçÁ∫øÁ®ãÂØπË±°ÁöÑ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;Â∑≤ÂâçËøõ&#34;</span> <span class="o">+</span> <span class="o">(</span><span class="n">i</span> <span class="o">*</span> <span class="n">speed</span><span class="o">)</span> <span class="o">+</span> <span class="s">&#34;Á±≥(&#34;</span> <span class="o">+</span> <span class="n">speed</span> <span class="o">+</span><span class="s">&#34;Á±≥/Áßí)&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="3-‰ΩøÁî®callableÂíåfutureÂàõÂª∫Á∫øÁ®ã">3. ‰ΩøÁî®CallableÂíåFutureÂàõÂª∫Á∫øÁ®ã</h3>
<ul>
<li><code>jDK1.5</code>‰ª•Âêé‰∏∫Êàë‰ª¨‰∏ìÈó®Êèê‰æõ‰∫Ü‰∏Ä‰∏™Âπ∂ÂèëÂ∑•ÂÖ∑ÂåÖ<code>java.util.concurrent</code></li>
<li><code>java.util.concurrent</code>ÂåÖÂê´ËÆ∏Â§öÁ∫øÁ®ãÂÆâÂÖ®„ÄÅÊµãËØïËâØÂ•Ω„ÄÅÈ´òÊÄßËÉΩÁöÑÂπ∂ÂèëÊûÑÂª∫Âùó„ÄÇÂàõÂª∫concurrentÁöÑÁõÆÁöÑÂ∞±ÊòØË¶ÅÂÆûÁé∞CollectionÊ°ÜÊû∂ÂØπÊï∞ÊçÆÁªìÊûÑÊâÄÊâßË°åÁöÑÂπ∂ÂèëÊìç‰Ωú„ÄÇÈÄöËøáÊèê‰æõ‰∏ÄÁªÑÂèØÈù†ÁöÑ„ÄÅÈ´òÊÄßËÉΩÂπ∂ÂèëÊûÑÂª∫ÂùóÔºåÂºÄÂèë‰∫∫ÂëòÂèØ‰ª•ÊèêÈ´òÂπ∂ÂèëÁ±ªÁöÑÁ∫øÁ®ãÂÆâÂÖ®„ÄÅÂèØ‰º∏Áº©ÊÄß„ÄÅÊÄßËÉΩ„ÄÅÂèØËØªÊÄßÂíåÂèØÈù†ÊÄß„ÄÇ</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">lab3</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ExecutionException</span><span class="o">,</span> <span class="n">InterruptedException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//ÂàõÂª∫‰∏Ä‰∏™Á∫øÁ®ãÊ±†,ÈáåÈù¢Ëá™Â∏¶‰∏â‰∏™&#34;Á©∫&#34;Á∫øÁ®ã Executors ÊòØË∞ÉÂ∫¶Âô®,ÂØπÁ∫øÁ®ãÊ±†ËøõË°åÁÆ°ÁêÜ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">ExecutorService</span> <span class="n">executorService</span> <span class="o">=</span> <span class="n">Executors</span><span class="o">.</span><span class="na">newFixedThreadPool</span><span class="o">(</span><span class="n">3</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//ÂÆû‰æãÂåñ Callable ÂØπË±°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">Runner03</span> <span class="n">person04</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Runner03</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">person04</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">&#34;PERSON04&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">Runner03</span> <span class="n">person05</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Runner03</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">person05</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">&#34;PERSON05&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">Runner03</span> <span class="n">person06</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Runner03</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">person06</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">&#34;PERSON06&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//Â∞ÜÊï¥‰∏™ÂØπË±°ÊâîÂà∞Á∫øÁ®ãÊ±†‰∏≠, Á∫øÁ®ãÊ±†Ëá™Âä®ÂàÜÈÖç‰∏Ä‰∏™Á∫øÁ®ãÊù•ËøêË°åperson04ÂØπË±°ÁöÑ callÊñπÊ≥ï
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//Future Áî®‰∫éÊé•Êî∂Á∫øÁ®ãÊ±†ÂÜÖÈÉ®callÊñπÊ≥ïÁöÑËøîÂõûÂÄº
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">Future</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">result04</span> <span class="o">=</span> <span class="n">executorService</span><span class="o">.</span><span class="na">submit</span><span class="o">(</span><span class="n">person04</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">Future</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">result05</span> <span class="o">=</span> <span class="n">executorService</span><span class="o">.</span><span class="na">submit</span><span class="o">(</span><span class="n">person05</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">Future</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">result06</span> <span class="o">=</span> <span class="n">executorService</span><span class="o">.</span><span class="na">submit</span><span class="o">(</span><span class="n">person06</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="n">5000</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//ÂÖ≥Èó≠Á∫øÁ®ãÊ±†,ÈáäÊîæÊâÄÊúâËµÑÊ∫ê
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">executorService</span><span class="o">.</span><span class="na">shutdown</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;PERSON04Á¥ØËÆ°Ë∑ë‰∫Ü: &#34;</span> <span class="o">+</span> <span class="n">result04</span><span class="o">.</span><span class="na">get</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;Á±≥&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;PERSON05Á¥ØËÆ°Ë∑ë‰∫Ü: &#34;</span> <span class="o">+</span> <span class="n">result05</span><span class="o">.</span><span class="na">get</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;Á±≥&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;PERSON06Á¥ØËÆ°Ë∑ë‰∫Ü: &#34;</span> <span class="o">+</span> <span class="n">result06</span><span class="o">.</span><span class="na">get</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;Á±≥&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">//‰ΩøÁî®Callable ÂÖÅËÆ∏ËøîÂõûÂÄº Âíå ÊäõÂá∫ÂºÇÂ∏∏
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">class</span> <span class="nc">Runner03</span> <span class="kd">implements</span> <span class="n">Callable</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setName</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//ÂÆûÁé∞ CallableÊé•Âè£ÂèØ‰ª•ÂÖÅËÆ∏Êàë‰ª¨ÁöÑÁ∫øÁ®ãËøîÂõûÂÄºÊàñÊäõÂá∫ÂºÇÂ∏∏
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">Integer</span> <span class="nf">call</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">Integer</span> <span class="n">speed</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Random</span><span class="o">().</span><span class="na">nextInt</span><span class="o">(</span><span class="n">100</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">Integer</span> <span class="n">distince</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span><span class="c1">//ÊÄªÂÖ±Â•îË∑ëÁöÑË∑ùÁ¶ª
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">100</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="n">10</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">distince</span> <span class="o">=</span> <span class="n">i</span> <span class="o">*</span> <span class="n">speed</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">+</span> <span class="s">&#34;Â∑≤ÂâçËøõ&#34;</span> <span class="o">+</span> <span class="n">distince</span> <span class="o">+</span> <span class="s">&#34;Á±≥(&#34;</span> <span class="o">+</span> <span class="n">speed</span> <span class="o">+</span> <span class="s">&#34;Á±≥/Áßí)&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">distince</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="table-wrapper"><table>
<thead>
<tr>
<th></th>
<th>‰ºòÁÇπ</th>
<th>Áº∫ÁÇπ</th>
<th>‰ΩøÁî®Âú∫ÊôØ</th>
</tr>
</thead>
<tbody>
<tr>
<td>ÁªßÊâøThread</td>
<td>ÁºñÁ®ãÁÆÄÂçï</td>
<td>ÂçïÁªßÊâø Êó†Ê≥ïÂØπÁ∫øÁ®ãÁªÑÊúâÊïàÊéßÂà∂</td>
<td>‰∏çÊé®Ëçê‰ΩøÁî®</td>
</tr>
<tr>
<td>ÂÆûÁé∞Runnable</td>
<td>Èù¢ÂêëÊé•Âè£ÁºñÁ®ã ÊâßË°åÊïàÁéáÈ´ò</td>
<td>Êó†Ê≥ïÂØπÁ∫øÁ®ãÁªÑÊúâÊïàÊéßÂà∂Ê≤°ÊúâËøîÂõûÂÄº„ÄÅÂºÇÂ∏∏</td>
<td>ÁÆÄÂçïÁöÑÂ§öÁ∫øÁ®ãÁ®ãÂ∫è</td>
</tr>
<tr>
<td>Âà©Áî®Á∫øÁ®ãÊ±†</td>
<td>ÂÆπÂô®ÁÆ°ÁêÜÁ∫øÁ®ã ÂÖÅËÆ∏ËøîÂõûÂÄºÂíåÂºÇÂ∏∏</td>
<td>ÊâßË°åÊïàÁéáÁõ∏ÂØπ‰Ωé ÁºñÁ®ãÂ§çÊùÇ</td>
<td><strong>‰ºÅ‰∏öÁ∫ßÂ∫îÁî® Êé®Ëçê‰ΩøÁî®</strong></td>
</tr>
</tbody>
</table></div>
<h2 id="synchronizedÁöÑ‰ΩøÁî®Âú∫ÊôØ">synchronizedÁöÑ‰ΩøÁî®Âú∫ÊôØ</h2>
<ul>
<li>
<p>synchronized‰ª£Á†ÅÂùó - ‰ªªÊÑèÂØπË±°Âç≥ÂèØ</p>
</li>
<li>
<blockquote>
<p>Âú®Â†Ü‰∏≠ÁöÑÂØπË±°ÂØπË±°Â§¥‰∏≠ÁöÑÁ∫øÁ®ãidÊåáÂêëÂΩìÂâçÁ∫øÁ®ã,Á∫øÁ®ã‰∏≠ÁöÑrecord markËÆ∞ÂΩïÂΩìÂâçÂØπË±°Â§¥ÁöÑ‰ø°ÊÅØ</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">classSample</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//ÈîÅÂØπË±°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Obeject</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Object</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">methodSample01</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">    	<span class="kd">synchronized</span><span class="o">(</span><span class="n">obj</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        	<span class="c1">//ÂæÖÂêåÊ≠•‰ª£Á†Å
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        	<span class="o">.</span> <span class="o">.</span> <span class="o">.</span>
</span></span><span class="line"><span class="cl">    	<span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">methodSample02</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">    	<span class="kd">synchronized</span><span class="o">(</span><span class="n">obj</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        	<span class="c1">//ÂæÖÂêåÊ≠•‰ª£Á†Å
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        	<span class="o">.</span> <span class="o">.</span> <span class="o">.</span>
</span></span><span class="line"><span class="cl">    	<span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>synchronizedÊñπÊ≥ï - thisÂΩìÂâçÂØπË±°</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">classSample</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">synchronized</span> <span class="kt">void</span> <span class="nf">methodSample01</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//ÂæÖÂêåÊ≠•‰ª£Á†Å
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="o">.</span> <span class="o">.</span> <span class="o">.</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">//ÁªôÊñπÊ≥ïÂä†ÈîÅÁ≠âÂêå‰∫éÁªôthisÂØπË±°Âä†ÈîÅ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">methodSample02</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">    	<span class="kd">synchronized</span><span class="o">(</span><span class="k">this</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        	<span class="c1">//ÂæÖÂêåÊ≠•‰ª£Á†Å
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        	<span class="o">.</span> <span class="o">.</span> <span class="o">.</span>
</span></span><span class="line"><span class="cl">    	<span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>synchronizedÈùôÊÄÅÊñπÊ≥ï - ËØ•Á±ªÁöÑÂ≠óËäÇÁ†ÅÂØπË±°</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">classSample</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">synchronized</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">methodSample01</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//ÂæÖÂêåÊ≠•‰ª£Á†Å
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="o">.</span> <span class="o">.</span> <span class="o">.</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">//ÁªôÈùôÊÄÅÊñπÊ≥ïÂä†ÈîÅÁ≠âÂêå‰∫éÁªôÁ±ªÁöÑÂ≠óËäÇÁ†ÅÂØπË±°Âä†ÈîÅ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">methodSample02</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">    	<span class="kd">synchronized</span><span class="o">(</span><span class="n">classSample</span><span class="o">.</span><span class="na">class</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        	<span class="c1">//ÂæÖÂêåÊ≠•‰ª£Á†Å
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        	<span class="o">.</span> <span class="o">.</span> <span class="o">.</span>
</span></span><span class="line"><span class="cl">    	<span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h2 id="Á∫øÁ®ãÁöÑ‰∫îÁßçÁä∂ÊÄÅ">Á∫øÁ®ãÁöÑ‰∫îÁßçÁä∂ÊÄÅ</h2>
<ol>
<li>Êñ∞Âª∫ (new)</li>
<li>Â∞±Áª™ (ready)</li>
<li>ËøêË°å‰∏≠ (running)</li>
<li>ÈòªÂ°û (blocked)</li>
<li>Ê≠ª‰∫° (dead)</li>
</ol>
<p><img src="https://img-1307890592.cos.ap-chengdu.myqcloud.com/typroa/image-20220322195314329.png"
	
	
	
	loading="lazy"
	
		alt="image-20220322195314329"
	
	
></p>
<h2 id="Ê≠ªÈîÅ">Ê≠ªÈîÅ</h2>
<p>Ê≠ªÈîÅÊòØÂú®Â§öÁ∫øÁ®ãÊÉÖÂÜµ‰∏ãÊúÄ‰∏•ÈáçÁöÑÈóÆÈ¢òÔºåÂú®Â§öÁ∫øÁ®ãÂØπÂÖ¨ÂÖ±ËµÑÊ∫ê ÔºàÊñá‰ª∂„ÄÅÊï∞ÊçÆÔºâÁ≠âËøõË°åÊìç‰ΩúÊó∂ÔºåÂΩºÊ≠§‰∏çÈáäÊîæËá™Â∑±ÁöÑËµÑÊ∫êÔºåËÄå ÂéªËØïÂõæÊìç‰ΩúÂÖ∂‰ªñÁ∫øÁ®ãÁöÑËµÑÊ∫êÔºåËÄåÂΩ¢Êàê‰∫§ÂèâÂºïÁî®ÔºåÂ∞±‰ºö‰∫ßÁîüÊ≠ªÈîÅ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DeadLock</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="kd">static</span> <span class="n">String</span> <span class="n">fileA</span> <span class="o">=</span> <span class="s">&#34;AÊñá‰ª∂&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="kd">static</span> <span class="n">String</span> <span class="n">fileB</span> <span class="o">=</span> <span class="s">&#34;BÊñá‰ª∂&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">new</span> <span class="n">Thread</span><span class="o">(){</span><span class="c1">//Á∫øÁ®ã1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="c1">//ÊâìÂºÄÊñá‰ª∂A,Á∫øÁ®ãÁã¨Âç†
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                    <span class="kd">synchronized</span> <span class="o">(</span><span class="n">fileA</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;: Êñá‰ª∂AÂÜôÂÖ•&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                        <span class="kd">synchronized</span> <span class="o">(</span><span class="n">fileB</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;: Êñá‰ª∂BÂÜôÂÖ•&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                        <span class="o">}</span>
</span></span><span class="line"><span class="cl">                        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;: ÊâÄÊúâÊñá‰ª∂‰øùÂ≠ò&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                    <span class="o">}</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="o">}.</span><span class="na">start</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">new</span> <span class="n">Thread</span><span class="o">(){</span><span class="c1">//Á∫øÁ®ã1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="c1">//ÊâìÂºÄÊñá‰ª∂A,Á∫øÁ®ãÁã¨Âç†
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                    <span class="kd">synchronized</span> <span class="o">(</span><span class="n">fileB</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;: Êñá‰ª∂BÂÜôÂÖ•&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                        <span class="kd">synchronized</span> <span class="o">(</span><span class="n">fileA</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;: Êñá‰ª∂AÂÜôÂÖ•&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                        <span class="o">}</span>
</span></span><span class="line"><span class="cl">                        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;: ÊâÄÊúâÊñá‰ª∂‰øùÂ≠ò&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                    <span class="o">}</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="o">}.</span><span class="na">start</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="Ëß£ÂÜ≥Ê≠ªÈîÅÊúÄÊ†πÊú¨ÁöÑÂª∫ËÆÆÊòØ">Ëß£ÂÜ≥Ê≠ªÈîÅÊúÄÊ†πÊú¨ÁöÑÂª∫ËÆÆÊòØÔºö</h3>
<ul>
<li>Â∞ΩÈáèÂáèÂ∞ëÂÖ¨ÂÖ±ËµÑÊ∫êÁöÑÂºïÁî®ÔºåÁî®ÂÆåÈ©¨‰∏äÈáäÊîæ</li>
<li>Áî®ÂÆåÈ©¨‰∏äÈáäÊîæÂÖ¨ÂÖ±ËµÑÊ∫ê</li>
<li>ÂáèÂ∞ësynchronized‰ΩøÁî®ÔºåÈááÁî®‚ÄúÂâØÊú¨‚ÄùÊñπÂºèÊõø‰ª£</li>
</ul>
<h2 id="Á∫øÁ®ãÂÆâÂÖ®">Á∫øÁ®ãÂÆâÂÖ®</h2>
<p>Âú®Êã•ÊúâÂÖ±‰∫´Êï∞ÊçÆÁöÑÂ§öÊù°Á∫øÁ®ãÂπ∂Ë°åÊâßË°åÁöÑÁ®ãÂ∫è‰∏≠ÔºåÁ∫øÁ®ãÂÆâÂÖ®ÁöÑ‰ª£Á†Å‰ºöÈÄöËøáÂêåÊ≠•Êú∫Âà∂‰øùËØÅÂêÑ‰∏™Á∫øÁ®ãÈÉΩÂèØ‰ª•Ê≠£Â∏∏‰∏îÊ≠£Á°ÆÁöÑÊâßË°åÔºå‰∏ç‰ºöÂá∫Áé∞Êï∞ÊçÆÊ±°ÊüìÁ≠âÊÑèÂ§ñÊÉÖÂÜµ</p>
<h3 id="Á∫øÁ®ãÂÆâÂÖ®-1">Á∫øÁ®ãÂÆâÂÖ®</h3>
<ul>
<li>
<p>‰ºòÁÇπÔºöÂèØÈù†</p>
</li>
<li>
<p>Áº∫ÁÇπÔºöÊâßË°åÈÄüÂ∫¶ÊÖ¢</p>
</li>
<li>
<p>‰ΩøÁî®Âª∫ËÆÆÔºöÈúÄË¶ÅÁ∫øÁ®ãÂÖ±‰∫´Êó∂‰ΩøÁî®</p>
</li>
</ul>
<h3 id="Á∫øÁ®ã‰∏çÂÆâÂÖ®">Á∫øÁ®ã‰∏çÂÆâÂÖ®</h3>
<ul>
<li>
<p>‰ºòÁÇπÔºöÈÄüÂ∫¶Âø´</p>
</li>
<li>
<p>Áº∫ÁÇπÔºöÂèØËÉΩ‰∏éÈ¢ÑÊúü‰∏çÁ¨¶</p>
</li>
<li>
<p>‰ΩøÁî®Âª∫ËÆÆÔºöÂú®Á∫øÁ®ãÂÜÖÈÉ®‰ΩøÁî®ÔºåÊó† ÈúÄÁ∫øÁ®ãÈó¥ÂÖ±‰∫´</p>
</li>
</ul>
<h3 id="Âàó‰∏æÁ∫øÁ®ãÂÆâÂÖ®‰∏é‰∏çÂÆâÂÖ®ÁöÑÁ±ª">Âàó‰∏æÁ∫øÁ®ãÂÆâÂÖ®‰∏é‰∏çÂÆâÂÖ®ÁöÑÁ±ª</h3>
<p><strong>StringBuffer</strong>ÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºå<strong>StringBuilder</strong>ÊòØÁ∫øÁ®ã‰∏çÂÆâÂÖ®ÁöÑ</p>
<p><strong>HashTable</strong>ÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºå<strong>HashMap</strong>ÊòØÁ∫øÁ®ã‰∏çÂÆâÂÖ®ÁöÑ</p>
<p><strong>Properties</strong>ÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºå<strong>HashSet</strong>„ÄÅ<strong>TreeSet</strong>ÊòØ‰∏çÂÆâÂÖ®ÁöÑ</p>
<p><strong>Vector</strong>ÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºå<strong>ArrayList</strong>„ÄÅ<strong>LinkedList</strong>ÊòØÁ∫øÁ®ã‰∏çÂÆâÂÖ®ÁöÑ</p>
<h2 id="threadpool-Á∫øÁ®ãÊ±†">ThreadPool Á∫øÁ®ãÊ±†</h2>
<h3 id="new-thread-ÁöÑÂºäÁ´Ø">new Thread() ÁöÑÂºäÁ´Ø</h3>
<ul>
<li>new Thread()Êñ∞Âª∫ÂØπË±°ÊÄßËÉΩÂ∑Æ</li>
<li>Á∫øÁ®ãÁº∫‰πèÁªü‰∏ÄÁÆ°ÁêÜÔºåÂèØËÉΩÊó†ÈôêÂà∂ÁöÑÊñ∞Âª∫Á∫øÁ®ãÔºåÁõ∏‰∫íÁ´û‰∫âÔºå‰∏•ÈáçÊó∂‰ºöÂç†Áî®ËøáÂ§öÁ≥ªÁªüËµÑÊ∫êÂØºËá¥Ê≠ªÊú∫ÊàñOOM</li>
</ul>
<h3 id="threadpool-Á∫øÁ®ãÊ±†-1">ThreadPool Á∫øÁ®ãÊ±†</h3>
<ul>
<li>ÈáçÁî®Â≠òÂú®ÁöÑÁ∫øÁ®ãÔºåÂáèÂ∞ëÂØπË±°ÂàõÂª∫„ÄÅÊ∂à‰∫°ÁöÑÂºÄÈîÄ</li>
<li>Á∫øÁ®ãÊÄªÊï∞ÂèØÊéßÔºåÊèêÈ´òËµÑÊ∫êÁöÑÂà©Áî®Áéá</li>
<li>ÈÅøÂÖçËøáÂ§öÁöÑËµÑÊ∫êÁ´û‰∫âÔºåÈÅøÂÖçÈòªÂ°û</li>
<li>Êèê‰æõÈ¢ùÂ§ñÂäüËÉΩÔºåÂÆöÊó∂ÊâßË°å„ÄÅÂÆöÊúüÊâßË°å„ÄÅÁõëÊéßÁ≠â</li>
</ul>
<h3 id="Á∫øÁ®ãÊ±†ÁöÑÁßçÁ±ª">Á∫øÁ®ãÊ±†ÁöÑÁßçÁ±ª</h3>
<p>Âú®JUC‰∏≠ÔºåÊèê‰æõ‰∫ÜÂ∑•ÂÖ∑Á±ªExecutorsÔºàË∞ÉÂ∫¶Âô®ÔºâÂØπË±°Êù•ÂàõÂª∫Á∫øÁ®ãÊ±†ÔºåÂèØÂàõÂª∫ÁöÑÁ∫øÁ®ãÊ±†ÊúâÂõõÁßçÔºö</p>
<ol>
<li>
<p>CachedThreadPoolÔºöÂèØÁºìÂ≠òÁ∫øÁ®ãÊ±†</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ThreadPoolSample01</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//ExecutorsË∞ÉÂ∫¶Âô®ÂØπË±°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//ExecutorServiceÁî®‰∫éÁÆ°ÁêÜÁ∫øÁ®ãÊ±†
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//ÂàõÂª∫‰∏Ä‰∏™ÂèØÁºìÂ≠òÁ∫øÁ®ãÊ±†
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//ÂèØÁºìÂ≠òÁ∫øÁ®ãÊ±†ÁöÑÁâπÁÇπ,Êó†ÈôêÂ§ß,Â¶ÇÊûúÁ∫øÁ®ãÊ±†‰∏≠Ê≤°ÊúâÂèØÁî®ÁöÑÁ∫øÁ®ãÂàôÂàõÂª∫,ÊúâÁ©∫Èó≤ÂàôÂà©Áî®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">ExecutorService</span> <span class="n">threadPool</span> <span class="o">=</span> <span class="n">Executors</span><span class="o">.</span><span class="na">newCachedThreadPool</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">1000</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="kd">final</span> <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">threadPool</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="k">new</span> <span class="n">Runnable</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">                <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34; : &#34;</span> <span class="o">+</span> <span class="n">index</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="o">});</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">//ÁªôÁ∫øÁ®ãË∂≥Â§üÁöÑËøêË°åÊó∂Èó¥
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="n">1000</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//threadPool.shutdown() ‰ª£Ë°®ÂÖ≥Èó≠Á∫øÁ®ãÊ±†(Á≠âÂæÖÊâÄÊúâÁ∫øÁ®ãÂÆåÊàê)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//threadPool.shutdownNow() ‰ª£Ë°®Á´ãÂç≥ÁªàÊ≠¢Á∫øÁ®ãÊ±†ÁöÑËøêË°å,‰∏çÁ≠âÂæÖÁ∫øÁ®ã,‰∏çÊé®Ëçê‰ΩøÁî®(Âº∫Âà∂ÂÖ≥Èó≠)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">threadPool</span><span class="o">.</span><span class="na">shutdown</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>FixedThreadPoolÔºöÂÆöÈïøÁ∫øÁ®ãÊ±†</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ThreadPoolSample02</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//ÂàõÂª∫‰∏Ä‰∏™ÂÆöÈïøÁ∫øÁ®ãÊ±†
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//ÂÆöÈïøÁ∫øÁ®ãÊ±†ÁöÑÁâπÁÇπ,Âõ∫ÂÆöÁ∫øÁ®ãÊÄªÊï∞,Á©∫Èó≤Á∫øÁ®ãÁî®‰∫éÊâßË°å‰ªªÂä°,Â¶ÇÊûúÁ∫øÁ®ãÈÉΩÂú®‰ΩøÁî®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//ÂêéÁª≠‰ªªÂä°ÂàôÂ§Ñ‰∫éÁ≠âÂæÖÁä∂ÊÄÅ(Â§áÈÄâÁöÑÁ≠âÂæÖÁÆóÊ≥ï‰∏∫ FIFO(ÈªòËÆ§)Âíå LIFO)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//Âú®Á∫øÁ®ãÊ±†‰∏≠ÁöÑÁ∫øÁ®ãÊâßË°å‰ªªÂä°ÂêéÂÜçÊâßË°åÂêéÁª≠ÁöÑ‰ªªÂä°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">ExecutorService</span> <span class="n">threadPool</span> <span class="o">=</span> <span class="n">Executors</span><span class="o">.</span><span class="na">newFixedThreadPool</span><span class="o">(</span><span class="n">3</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">1000</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="kd">final</span> <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">threadPool</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="k">new</span> <span class="n">Runnable</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">                <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34; : &#34;</span> <span class="o">+</span> <span class="n">index</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="o">});</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="n">1000</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">threadPool</span><span class="o">.</span><span class="na">shutdown</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>SingleThreadExecutorÔºöÂçïÁ∫øÁ®ãÊ±†</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ThreadPoolSample03</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//ExecutorsË∞ÉÂ∫¶Âô®ÂØπË±°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//ExecutorServiceÁî®‰∫éÁÆ°ÁêÜÁ∫øÁ®ãÊ±†
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//ÂàõÂª∫‰∏Ä‰∏™ÂçïÁ∫øÁ®ãÁ∫øÁ®ãÊ±†
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">ExecutorService</span> <span class="n">threadPool</span> <span class="o">=</span> <span class="n">Executors</span><span class="o">.</span><span class="na">newSingleThreadExecutor</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">1000</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="kd">final</span> <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">threadPool</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="k">new</span> <span class="n">Runnable</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">                <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34; : &#34;</span> <span class="o">+</span> <span class="n">index</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="o">});</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="n">1000</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">threadPool</span><span class="o">.</span><span class="na">shutdown</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>ScheduledThreadPoolÔºöË∞ÉÂ∫¶Á∫øÁ®ãÊ±†</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ThreadPoolSample04</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//ExecutorsË∞ÉÂ∫¶Âô®ÂØπË±°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//ExecutorServiceÁî®‰∫éÁÆ°ÁêÜÁ∫øÁ®ãÊ±†
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//ÂàõÂª∫‰∏Ä‰∏™ÂèØË∞ÉÂ∫¶Á∫øÁ®ãÊ±†
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">ScheduledExecutorService</span> <span class="n">scheduledThreadPool</span> <span class="o">=</span> <span class="n">Executors</span><span class="o">.</span><span class="na">newScheduledThreadPool</span><span class="o">(</span><span class="n">5</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//Âª∂Ëøü‰∏âÁßíÊâßË°å‰∏ÄÊ¨°run
</span></span></span><span class="line"><span class="cl"><span class="c1">//        scheduledThreadPool.schedule(new Runnable() {
</span></span></span><span class="line"><span class="cl"><span class="c1">//            @Override
</span></span></span><span class="line"><span class="cl"><span class="c1">//            public void run() {
</span></span></span><span class="line"><span class="cl"><span class="c1">//                System.out.println(&#34;Âª∂Ëøü3sÊâßË°å&#34;);
</span></span></span><span class="line"><span class="cl"><span class="c1">//            }
</span></span></span><span class="line"><span class="cl"><span class="c1">//        }, 3, TimeUnit.SECONDS);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">        <span class="c1">//Âú®‰ΩøÁî®ÂèØË∞ÉÂ∫¶Á∫øÁ®ãÊ±†Âêé TimerÁ±ªÂ∞±ÂèØ‰ª•‰∏çÂÜç‰ΩøÁî®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//‰ΩÜÊòØÂú®È°πÁõÆÂÆûÈôÖÂºÄÂèë‰∏≠‰∏§ËÄÖÈÉΩ‰∏ç‰ºöË¢´Áî®Âà∞,
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//Âõ†‰∏∫ÊúâÁùÄÊõ¥‰∏∫ÊàêÁÜüÁöÑË∞ÉÂ∫¶Ê°ÜÊû∂ Quartz Êàñ SpringËá™Â∏¶Ë∞ÉÂ∫¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">scheduledThreadPool</span><span class="o">.</span><span class="na">scheduleAtFixedRate</span><span class="o">(</span><span class="k">new</span> <span class="n">Runnable</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">new</span> <span class="n">Date</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;  Âª∂Ëøü1sÊâßË°å,ÊØè3sÊâßË°å‰∏ÄÊ¨°&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="o">},</span> <span class="n">1</span><span class="o">,</span> <span class="n">3</span><span class="o">,</span> <span class="n">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<h2 id="countdownlatch-ÂÄíËÆ°Êó∂ÈîÅ">CountDownLatch ÂÄíËÆ°Êó∂ÈîÅ</h2>
<p>CountDownLatchÂÄíËÆ°Êó∂ÈîÅÈÄÇÂêà&quot;ÊÄª-ÂàÜ‰ªªÂä°&quot;Ôºå‰æãÂ¶ÇÂ§öÁ∫øÁ®ãËÆ°ÁÆóÂêéÁöÑÊï∞ÊçÆÊ±áÊÄªÔºåÂèØ‰ª•ÂÆûÁé∞Á±ª‰ººËÆ°Êï∞Âô®ÁöÑÂäüËÉΩ</p>
<h3 id="cdlÊâßË°åÂéüÁêÜ">CDLÊâßË°åÂéüÁêÜ</h3>
<p><img src="https://img-1307890592.cos.ap-chengdu.myqcloud.com/typroa/image-20220322234437780.png"
	
	
	
	loading="lazy"
	
		alt="image-20220322234437780"
	
	
></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CountDownSample</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">ExecutorService</span> <span class="n">threadPool</span> <span class="o">=</span> <span class="n">Executors</span><span class="o">.</span><span class="na">newFixedThreadPool</span><span class="o">(</span><span class="n">100</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//CDLÊÄªÊï∞ÂíåÊìç‰ΩúÊï∞‰øùÊåÅ‰∏ÄÁõ¥
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">CountDownLatch</span> <span class="n">cdl</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CountDownLatch</span><span class="o">(</span><span class="n">10000</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">10000</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="kd">final</span> <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">threadPool</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="k">new</span> <span class="n">Runnable</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">                <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="kd">synchronized</span> <span class="o">(</span><span class="n">CountDownSample</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                        <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                            <span class="n">count</span> <span class="o">+=</span> <span class="n">index</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">                        <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                            <span class="n">cdl</span><span class="o">.</span><span class="na">countDown</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">                        <span class="o">}</span>
</span></span><span class="line"><span class="cl">                    <span class="o">}</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="o">});</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">//Â†µÂ°ûÂΩìÂâçÁ∫øÁ®ã,Áõ¥Âà∞cdl=0ÁöÑÈÄÇÂêàÂÜçÁªßÁª≠ÂæÄ‰∏ãËµ∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="n">cdl</span><span class="o">.</span><span class="na">await</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">count</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">threadPool</span><span class="o">.</span><span class="na">shutdown</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="semaphore-‰ø°Âè∑Èáè">Semaphore ‰ø°Âè∑Èáè</h2>
<p>Semaphore‰ø°Âè∑ÈáèÁªèÂ∏∏Áî®‰∫éÈôêÂà∂Ëé∑ÂèñÊüêÁßçËµÑÊ∫êÁöÑÁ∫øÁ®ãÊï∞Èáè</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SemaphoreSample01</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//Áî®Êù•Ë£ÖËΩΩÁ≠âÂæÖÁöÑËØ∑Ê±Ç
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">ExecutorService</span> <span class="n">threadPool</span> <span class="o">=</span> <span class="n">Executors</span><span class="o">.</span><span class="na">newCachedThreadPool</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//ÂÆö‰πâ5‰∏™‰ø°Âè∑Èáè,Âç≥ÊúçÂä°Âô®Âè™ÂÖÅËÆ∏5‰∏™ËØ∑Ê±ÇÂêåÊó∂ËøõË°å
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">Semaphore</span> <span class="n">semaphore</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Semaphore</span><span class="o">(</span><span class="n">5</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">20</span> <span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="kd">final</span> <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">threadPool</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="k">new</span> <span class="n">Runnable</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">                <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                        <span class="c1">//Ëé∑Âèñ‰∏Ä‰∏™‰ø°Âè∑Èáè, Âç†Áî®‰∏Ä‰∏™&#34;‰ΩøÁî®ÊùÉ&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                        <span class="n">semaphore</span><span class="o">.</span><span class="na">acquire</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">                        <span class="n">use</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">                        <span class="c1">//ÊâßË°åÂÆåÊàêÂêéÈáäÊîæËøô‰∏™‰ø°Âè∑Èáè, ÁªìÊùüÊúçÂä°‰ΩøÁî®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                        <span class="n">semaphore</span><span class="o">.</span><span class="na">release</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">                    <span class="o">}</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="o">});</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">threadPool</span><span class="o">.</span><span class="na">shutdown</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">use</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">new</span> <span class="n">Date</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34; &#34;</span> <span class="o">+</span> <span class="n">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;Ëé∑ÂæóÊúçÂä°Âô®‰ΩøÁî®ËµÑÊ†º&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="n">2000</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">new</span> <span class="n">Date</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34; &#34;</span> <span class="o">+</span> <span class="n">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;ÈÄÄÂá∫ÊúçÂä°Âô®&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="n">500</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊúçÂä°Â∑≤Êª°ÁªàÊ≠¢Á≠âÂæÖÊèêÁ§∫</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SemaphoreSample02</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">ExecutorService</span> <span class="n">threadPool</span> <span class="o">=</span> <span class="n">Executors</span><span class="o">.</span><span class="na">newCachedThreadPool</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">Semaphore</span> <span class="n">semaphore</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Semaphore</span><span class="o">(</span><span class="n">5</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">20</span> <span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="kd">final</span> <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">threadPool</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="k">new</span> <span class="n">Runnable</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">                <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                        <span class="c1">//Â∞ùËØïËé∑Âèñ‰∏ÄÊ¨°‰ø°Âè∑Èáè,Ëé∑ÂèñÂà∞ËøîÂõûtrueÂê¶ÂàôËøîÂõûfalse
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                        <span class="k">if</span> <span class="o">(</span><span class="n">semaphore</span><span class="o">.</span><span class="na">tryAcquire</span><span class="o">(</span><span class="n">6</span><span class="o">,</span> <span class="n">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">)){</span>
</span></span><span class="line"><span class="cl">                            <span class="n">use</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">                            <span class="n">semaphore</span><span class="o">.</span><span class="na">release</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">                        <span class="o">}</span> <span class="k">else</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">                            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34; ÂØπ‰∏çËµ∑,ÊúçÂä°Âô®Â∑≤Êª°,ËØ∑Á®çÂêéÂÜçËØï&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                        <span class="o">}</span>
</span></span><span class="line"><span class="cl">                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">                    <span class="o">}</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="o">});</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">threadPool</span><span class="o">.</span><span class="na">shutdown</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">use</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">new</span> <span class="n">Date</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34; &#34;</span> <span class="o">+</span> <span class="n">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;Ëé∑ÂæóÊúçÂä°Âô®‰ΩøÁî®ËµÑÊ†º&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="n">2000</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">new</span> <span class="n">Date</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34; &#34;</span> <span class="o">+</span> <span class="n">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;ÈÄÄÂá∫ÊúçÂä°Âô®&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="n">500</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="cyclicbarrier-Âæ™ÁéØÂ±èÈöú">CyclicBarrier Âæ™ÁéØÂ±èÈöú</h2>
<p>CyclicBarrier ÊòØ‰∏Ä‰∏™ÂêåÊ≠•Â∑•ÂÖ∑Á±ªÔºåÂÆÉÂÖÅËÆ∏‰∏ÄÁªÑÁ∫øÁ®ã‰∫íÁõ∏Á≠âÂæÖÔºåÁõ¥Âà∞Âà∞ËææÊüê‰∏™ÂÖ¨ÂÖ±Â±èÈöúÂ∏¶‰Ω†„ÄÇ‰∏éCDL‰∏çÂêåÁöÑÊòØËØ•barrierÂÜçÈáäÊîæÁ≠âÂæÖÁ∫øÁ®ãÂêéÂèØ‰ª•ÂÆ†Áî®ÔºåÊâÄ‰ª•Áß∞‰∏∫Âæ™ÁéØ(Cyclic)Â±èÈöú(Barrier)„ÄÇ</p>
<p><img src="https://img-1307890592.cos.ap-chengdu.myqcloud.com/typroa/image-20220323002754810.png"
	
	
	
	loading="lazy"
	
		alt="image-20220323002754810"
	
	
></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CyclicBarrierSample</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="kd">static</span> <span class="n">CyclicBarrier</span> <span class="n">cyclicBarrier</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CyclicBarrier</span><span class="o">(</span><span class="n">5</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">ExecutorService</span> <span class="n">threadPool</span> <span class="o">=</span> <span class="n">Executors</span><span class="o">.</span><span class="na">newCachedThreadPool</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">20</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="kd">final</span> <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="n">1000</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="n">threadPool</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="k">new</span> <span class="n">Runnable</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">                <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">go</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="o">});</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">threadPool</span><span class="o">.</span><span class="na">shutdown</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">go</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34; ÂáÜÂ§áÂ∞±Áª™&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">//ËÆæÁΩÆÂ±èÈöúÁÇπ,ÂΩìÁ¥ØËÆ°‰∫î‰∏™Á∫øÁ®ãÈÉΩÂáÜÂ§áÂ•ΩÂêé,ÊâçËøêË°åÂêéÈù¢ÁöÑ‰ª£Á†Å
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="n">cyclicBarrier</span><span class="o">.</span><span class="na">await</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34; ÂºÄÂßãËøêË°å&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">BrokenBarrierException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="cyclicbarrier-Â∫îÁî®Âú∫ÊôØ">CyclicBarrier Â∫îÁî®Âú∫ÊôØ</h3>
<p>ÈÄÇÁî®‰∫éÂ§öÁ∫øÁ®ãÂøÖÈ°ªÂêåÊó∂ÂºÄÂßãÁöÑÂú∫ÊôØÔºåÊä¢Á•®ÁßíÊùÄÁ≠âÁ≠â</p>
<h2 id="reentrantlock-ÈáçÂÖ•ÈîÅ">ReentrantLock ÈáçÂÖ•ÈîÅ</h2>
<p>ÈáçÂÖ•ÈîÅÊòØÊåá‰ªªÊÑèÁ∫øÁ®ãÂú®Ëé∑ÂèñÂà∞ÈîÅ‰πãÂêéÔºåÂÜçÊ¨°Ëé∑ÂèñËØ•ÈîÅËÄå‰∏ç‰ºöË¢´ËØ•ÈîÅÊâÄÈòªÂ°û</p>
<p>ReentrantLockËÆæËÆ°ÁöÑÁõÆÊ†áÊòØÁî®Êù•Êõø‰ª£synchronizedÂÖ≥ÈîÆÂ≠ó1</p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>ÁâπÂæÅ</th>
<th>synchronizedÔºàÊé®ËçêÔºâ</th>
<th>ReentrantLock</th>
</tr>
</thead>
<tbody>
<tr>
<td>Â∫ïÂ±ÇÂéüÁêÜ</td>
<td>JVMÂÆûÁé∞</td>
<td>JDKÂÆûÁé∞</td>
</tr>
<tr>
<td>ÊÄßËÉΩÂå∫Âà´</td>
<td>‰Ωé -&gt; È´ò (JDK5+)</td>
<td>È´ò</td>
</tr>
<tr>
<td>ÈîÅÁöÑÈáäÊîæ</td>
<td>Ëá™Âä®ÈáäÊîæ (ÁºñËØëÂô®‰øùËØÅ)</td>
<td>ÊâãÂä®ÈáäÊîæ (finally‰øùËØÅ)</td>
</tr>
<tr>
<td>ÁºñÁ†ÅÈöæÂ∫¶</td>
<td>ÁÆÄÂçï</td>
<td>Â§çÊùÇ</td>
</tr>
<tr>
<td>ÈîÅÁöÑÁ≤íÂ∫¶</td>
<td>ËØªÂÜô‰∏çÂå∫ÂàÜ</td>
<td>ËØªÈîÅ„ÄÅÂÜôÈîÅ</td>
</tr>
<tr>
<td>È´òÁ∫ßÂäüËÉΩ</td>
<td>Êó†</td>
<td>ÂÖ¨Âπ≥ÈîÅ„ÄÅÈùûÂÖ¨Âπ≥ÈîÅÂî§ÈÜí„ÄÅConditionÂàÜÁªÑÂî§ÈÜí„ÄÅ‰∏≠Êñ≠Á≠âÂæÖÈîÅ</td>
</tr>
</tbody>
</table></div>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ReentrantLockSample</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="n">users</span> <span class="o">=</span> <span class="n">100</span><span class="o">;</span><span class="c1">//ÂêåÊó∂Ê®°ÊãüÁöÑÂπ∂ÂèëËÆøÈóÆÁî®Êà∑Êï∞Èáè
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="n">downTotal</span> <span class="o">=</span> <span class="n">50000</span><span class="o">;</span> <span class="c1">//Áî®Êà∑‰∏ãËΩΩÁöÑÁúüÂÆûÊÄªÊï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span><span class="c1">//ËÆ°Êï∞Âô®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">private</span> <span class="kd">static</span> <span class="n">ReentrantLock</span> <span class="n">lock</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ReentrantLock</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//Ë∞ÉÂ∫¶Âô®ÔºåJDK1.5ÂêéÊèê‰æõÁöÑconcurrentÂåÖÂØπ‰∫éÂπ∂ÂèëÁöÑÊîØÊåÅ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">ExecutorService</span> <span class="n">executorService</span> <span class="o">=</span> <span class="n">Executors</span><span class="o">.</span><span class="na">newCachedThreadPool</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//‰ø°Âè∑ÈáèÔºåÁî®‰∫éÊ®°ÊãüÂπ∂ÂèëÁöÑ‰∫∫Êï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kd">final</span> <span class="n">Semaphore</span> <span class="n">semaphore</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Semaphore</span><span class="o">(</span><span class="n">users</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">downTotal</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">executorService</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="c1">//ÈÄöËøáÂ§öÁ∫øÁ®ãÊ®°ÊãüN‰∏™Áî®Êà∑Âπ∂ÂèëËÆøÈóÆÂπ∂‰∏ãËΩΩ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">semaphore</span><span class="o">.</span><span class="na">acquire</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">                    <span class="n">add</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">                    <span class="n">semaphore</span><span class="o">.</span><span class="na">release</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="o">});</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="n">3000</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">executorService</span><span class="o">.</span><span class="na">shutdown</span><span class="o">();</span><span class="c1">//ÂÖ≥Èó≠Ë∞ÉÂ∫¶ÊúçÂä°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;‰∏ãËΩΩÊÄªÊï∞Ôºö&#34;</span> <span class="o">+</span> <span class="n">count</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">add</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">lock</span><span class="o">.</span><span class="na">lock</span><span class="o">();</span><span class="c1">//‰∏äÈîÅ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">count</span><span class="o">++;</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">lock</span><span class="o">.</span><span class="na">unlock</span><span class="o">();</span> <span class="c1">//Ëß£ÈîÅÔºå‰∏ÄÂÆöË¶ÅÊîæÂú®finallyÈáåÈù¢Âê¶Âàô‰ºöÂá∫Áé∞Ê≠ªÈîÅ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="condition-Á≠âÂæÖ‰∏éÂî§ÈÜí">Condition Á≠âÂæÖ‰∏éÂî§ÈÜí</h2>
<p>Âú®Âπ∂Ë°åÁ®ãÂ∫è‰∏≠ÔºåÈÅøÂÖç‰∏ç‰∫ÜÊüê‰∫õÁ∫øÁ®ãË¶ÅÈ¢ÑÂÖàËßÑÂÆöÂ•ΩÈ°∫Â∫èÊâßË°åÔºåÂ¶ÇÔºöÂÖàÊñ∞Â¢ûÂÜç‰øÆÊîπÔºåÂÖà‰π∞ÂêéÂçñÔºåÂÖàËøõÂêéÂá∫&hellip;ÔºåÂØπ‰∫éËøôÁßçÂú∫ÊôØÔºå‰ΩøÁî®JUC‰∏≠ÁöÑConditionÂØπË±°ÂÜçÈÄÇÂêà‰∏çËøá‰∫Ü„ÄÇ</p>
<p>JUC‰∏≠Êèê‰æõ‰∫ÜConditionÂØπË±°ÔºåÁî®‰∫éËÆ©ÊåáÂÆöÁ∫øÁ®ãÁ≠âÂæÖÂíåÂî§ÈÜíÔºåÊåâÈ¢ÑÊúüÈ°∫Â∫èÊâßË°å„ÄÇ<strong>ÂÆÉÂøÖÈ°ªÂíåReentrantLockÈáçÂÖ•ÈîÅÈÖçÂêà‰ΩøÁî®„ÄÇ</strong></p>
<p>ConditionÁî®‰∫éÊõø‰ª£wait()Âíå/notify()ÊñπÊ≥ï</p>
<ul>
<li>notify()Âè™ËÉΩÈöèÊú∫Âî§ÈÜíÁ≠âÂæÖÁöÑÁ∫øÁ®ãÔºåËÄåConditionÂèØ‰ª•Âî§ÈÜíÊåáÂÆöÁöÑÁ∫øÁ®ãÔºåËøôÊúâÂà©‰∫éÊõ¥Â•ΩÁöÑÊéßÂà∂Âπ∂ÂèëÁ®ãÂ∫è„ÄÇ</li>
</ul>
<h3 id="conditionÊ†∏ÂøÉÊñπÊ≥ï">ConditionÊ†∏ÂøÉÊñπÊ≥ï</h3>
<ul>
<li>await()ÔºöÈòªÂ°ûÂΩìÂâçÁ∫øÁ®ãÔºåÁõ¥Âà∞singal()Âî§ÈÜí</li>
<li>signal()ÔºöÂî§ÈÜíË¢´await()ÁöÑÁ∫øÁ®ãÔºå‰ªé‰∏≠Êñ≠Â§ÑÁªßÁª≠ÊâßË°å</li>
<li>signalAll()ÔºöÂî§ÈÜíÊâÄÊúâË¢´await()ÈòªÂ°ûÁöÑÁ∫øÁ®ã</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ConditionSample</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//ConditionÂØπË±°ÂøÖÈ°ªÈÖçÂêàLock‰∏ÄËµ∑‰ΩøÁî®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">ReentrantLock</span> <span class="n">lock</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ReentrantLock</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">Condition</span> <span class="n">c1</span> <span class="o">=</span> <span class="n">lock</span><span class="o">.</span><span class="na">newCondition</span><span class="o">();</span><span class="c1">//ÂàõÂª∫Condition
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">Condition</span> <span class="n">c2</span> <span class="o">=</span> <span class="n">lock</span><span class="o">.</span><span class="na">newCondition</span><span class="o">();</span><span class="c1">//ÂàõÂª∫Condition
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">Condition</span> <span class="n">c3</span> <span class="o">=</span> <span class="n">lock</span><span class="o">.</span><span class="na">newCondition</span><span class="o">();</span><span class="c1">//ÂàõÂª∫Condition
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">        <span class="k">new</span> <span class="n">Thread</span><span class="o">(</span><span class="k">new</span> <span class="n">Runnable</span><span class="o">()</span> <span class="o">{</span> <span class="c1">//T1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">lock</span><span class="o">.</span><span class="na">lock</span><span class="o">();</span><span class="c1">//Âä†ÈîÅ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">c1</span><span class="o">.</span><span class="na">await</span><span class="o">();</span><span class="c1">//ÈòªÂ°ûÂΩìÂâçÁ∫øÁ®ã,c1.signalÁöÑÊó∂ÂÄôÁ∫øÁ®ãÊøÄÊ¥ªÁªßÁª≠ÊâßË°å
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                    <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="n">1000</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Á≤íÁ≤íÁöÜËæõËã¶&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">lock</span><span class="o">.</span><span class="na">unlock</span><span class="o">();</span><span class="c1">//Ëß£ÈîÅ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="o">}).</span><span class="na">start</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">new</span> <span class="n">Thread</span><span class="o">(</span><span class="k">new</span> <span class="n">Runnable</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">lock</span><span class="o">.</span><span class="na">lock</span><span class="o">();</span><span class="c1">//Âä†ÈîÅ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">c2</span><span class="o">.</span><span class="na">await</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">                    <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="n">1000</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Ë∞ÅÁü•Áõò‰∏≠È§ê&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                    <span class="n">c1</span><span class="o">.</span><span class="na">signal</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">lock</span><span class="o">.</span><span class="na">unlock</span><span class="o">();</span><span class="c1">//Ëß£ÈîÅ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="o">}).</span><span class="na">start</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">new</span> <span class="n">Thread</span><span class="o">(</span><span class="k">new</span> <span class="n">Runnable</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">lock</span><span class="o">.</span><span class="na">lock</span><span class="o">();</span><span class="c1">//Âä†ÈîÅ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">c3</span><span class="o">.</span><span class="na">await</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">                    <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="n">1000</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Ê±óÊª¥Á¶æ‰∏ãÂúü&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                    <span class="n">c2</span><span class="o">.</span><span class="na">signal</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">lock</span><span class="o">.</span><span class="na">unlock</span><span class="o">();</span><span class="c1">//Ëß£ÈîÅ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="o">}).</span><span class="na">start</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">new</span> <span class="n">Thread</span><span class="o">(</span><span class="k">new</span> <span class="n">Runnable</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">lock</span><span class="o">.</span><span class="na">lock</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">                <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="n">1000</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;ÈîÑÁ¶æÊó•ÂΩìÂçà&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                    <span class="n">c3</span><span class="o">.</span><span class="na">signal</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">lock</span><span class="o">.</span><span class="na">unlock</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="o">}).</span><span class="na">start</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="callable--future">Callable &amp; Future</h2>
<p>Callable Âíå Runnable‰∏ÄÊ†∑‰ª£Ë°®ÁùÄ‰ªªÂä°ÔºåÂå∫Âà´Âú®‰∫éCallable<strong>ÊúâËøîÂõûÂÄº</strong>Âπ∂‰∏î<strong>ÂèØ‰ª•ÊäõÂá∫ÂºÇÂ∏∏</strong>„ÄÇ</p>
<p>Future ÊòØ‰∏Ä‰∏™Êé•Âè£„ÄÇÂÆÉÁî®‰∫é<strong>Ë°®Á§∫ÂºÇÊ≠•ËÆ°ÁÆóÁöÑÁªìÊûú</strong>„ÄÇÊèê‰æõ‰∫ÜÊ£ÄÊü•ËÆ°ÁÆóÊòØÂê¶ÂÆåÊàêÁöÑÊñπÊ≥ïÔºå‰ª•Á≠âÂæÖËÆ°ÁÆóÁöÑÂÆåÊàêÔºåÂπ∂Ëé∑ÂèñËÆ°ÁÆóÁöÑÁªìÊûú„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//Âπ∂ÂèëËÆ°ÁÆóË¥®Êï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">FutureSample</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">ExecutorService</span> <span class="n">threadPool</span> <span class="o">=</span> <span class="n">Executors</span><span class="o">.</span><span class="na">newFixedThreadPool</span><span class="o">(</span><span class="n">10</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">2</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">10000</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Computer</span> <span class="n">c</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Computer</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">            <span class="n">c</span><span class="o">.</span><span class="na">setNum</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="c1">//FutureÂØπÁî®‰∫éËÆ°ÁÆóÁöÑÁ∫øÁ®ãËøõË°åÁõëÂê¨,Âõ†‰∏∫ËÆ°ÁÆóÊòØÂú®ÂÖ∂ÂÆÉÁ∫øÁ®ã‰∏≠ÊâßË°åÁöÑ,ÊâÄ‰ª•Ëøô‰∏™ËøîÂõûÁªìÊûúÁöÑËøáÁ®ãÊòØÂºÇÊ≠•ÁöÑ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="c1">//Â∞ÜcÂØπË±°Êèê‰∫§ÁªôÁ∫øÁ®ãÊ±†,Â¶ÇÊúâÁ©∫Èó≤Á∫øÁ®ãÁ´ãÂç≥ÊâßË°åÈáåÈù¢ÁöÑcallÊñπÊ≥ï
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="n">Future</span><span class="o">&lt;</span><span class="n">Boolean</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">threadPool</span><span class="o">.</span><span class="na">submit</span><span class="o">(</span><span class="n">c</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="c1">//Áî®‰∫éËé∑ÂèñËøîÂõûÂÄº,Â¶ÇÊûúÁ∫øÁ®ãÂÜÖÈÉ®ÁöÑcallÊ≤°ÊúâÊâßË°åÂÆåÊàê,ÂàôËøõÂÖ•Á≠âÂà∞Áä∂ÊÄÅ,Áõ¥Âà∞ËÆ°ÁÆóÂÆåÊàê
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="n">Boolean</span> <span class="n">r</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="na">get</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="o">(</span><span class="n">r</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">                    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">c</span><span class="o">.</span><span class="na">getNum</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ExecutionException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">threadPool</span><span class="o">.</span><span class="na">shutdown</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">Computer</span> <span class="kd">implements</span> <span class="n">Callable</span><span class="o">&lt;</span><span class="n">Boolean</span><span class="o">&gt;</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">Integer</span> <span class="n">num</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">Integer</span> <span class="nf">getNum</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">num</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setNum</span><span class="o">(</span><span class="n">Integer</span> <span class="n">num</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">num</span> <span class="o">=</span> <span class="n">num</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">Boolean</span> <span class="nf">call</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">boolean</span> <span class="n">isPrime</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">2</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="o">(</span><span class="n">num</span> <span class="o">%</span> <span class="n">i</span> <span class="o">==</span> <span class="n">0</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">                <span class="n">isPrime</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">                <span class="k">break</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">isPrime</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="juc-Âπ∂ÂèëÂÆπÂô®">JUC Âπ∂ÂèëÂÆπÂô®</h2>
<p>ArrayList -&gt; CopyOnWriteArrayList - ÂÜôÂ§çÂà∂ÂàóË°®</p>
<p>HashSet -&gt; CopyOnWriteArraySet - ÂÜôÂ§çÂà∂ÈõÜÂêà</p>
<p>HashMap -&gt; ConcurrentHashMap - ÂàÜÊÆµÈîÅÊò†Â∞Ñ</p>
<h3 id="copyonwritearraylist-Âπ∂ÂèëÂéüÁêÜ">CopyOnWriteArrayList Âπ∂ÂèëÂéüÁêÜ</h3>
<p>CopyOnWriteArrayList ÈÄöËøá&quot;ÂâØÊú¨&quot;Ëß£ÂÜ≥Âπ∂ÂèëÈóÆÈ¢ò</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CopyOnWriteArrayListSample</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CopyOnWriteArrayList</span> <span class="o">&lt;&gt;();</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">1000</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="o">(</span><span class="n">Integer</span> <span class="n">i</span> <span class="o">:</span> <span class="n">list</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">list</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">list</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>CopyOnWriteArraySet Âπ∂ÂèëÂéüÁêÜ</p>
<p>‰∏éCopyOnWriteArrayListÁ±ª‰ºº</p>
<h3 id="concurrenthashmap">ConcurrentHashMap</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ReentrantLockSample</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="n">users</span> <span class="o">=</span> <span class="n">100</span><span class="o">;</span><span class="c1">//ÂêåÊó∂Ê®°ÊãüÁöÑÂπ∂ÂèëËÆøÈóÆÁî®Êà∑Êï∞Èáè
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="n">downTotal</span> <span class="o">=</span> <span class="n">50000</span><span class="o">;</span> <span class="c1">//Áî®Êà∑‰∏ãËΩΩÁöÑÁúüÂÆûÊÄªÊï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="kd">static</span> <span class="n">ConcurrentHashMap</span> <span class="n">count</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ConcurrentHashMap</span><span class="o">();</span><span class="c1">//ËÆ°Êï∞Âô®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//Ë∞ÉÂ∫¶Âô®ÔºåJDK1.5ÂêéÊèê‰æõÁöÑconcurrentÂåÖÂØπ‰∫éÂπ∂ÂèëÁöÑÊîØÊåÅ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">ExecutorService</span> <span class="n">executorService</span> <span class="o">=</span> <span class="n">Executors</span><span class="o">.</span><span class="na">newCachedThreadPool</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//‰ø°Âè∑ÈáèÔºåÁî®‰∫éÊ®°ÊãüÂπ∂ÂèëÁöÑ‰∫∫Êï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kd">final</span> <span class="n">Semaphore</span> <span class="n">semaphore</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Semaphore</span><span class="o">(</span><span class="n">users</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">downTotal</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="kd">final</span> <span class="n">Integer</span> <span class="n">index</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">executorService</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="c1">//ÈÄöËøáÂ§öÁ∫øÁ®ãÊ®°ÊãüN‰∏™Áî®Êà∑Âπ∂ÂèëËÆøÈóÆÂπ∂‰∏ãËΩΩ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">semaphore</span><span class="o">.</span><span class="na">acquire</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">                    <span class="n">count</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">index</span><span class="o">,</span> <span class="n">index</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                    <span class="n">semaphore</span><span class="o">.</span><span class="na">release</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="o">});</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="n">3000</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">executorService</span><span class="o">.</span><span class="na">shutdown</span><span class="o">();</span><span class="c1">//ÂÖ≥Èó≠Ë∞ÉÂ∫¶ÊúçÂä°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;‰∏ãËΩΩÊÄªÊï∞Ôºö&#34;</span> <span class="o">+</span> <span class="n">count</span><span class="o">.</span><span class="na">size</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="atomic-ÂåÖ--cas-ÁÆóÊ≥ï">Atomic ÂåÖ &amp; CAS ÁÆóÊ≥ï</h2>
<h3 id="ÂéüÂ≠êÊÄß">ÂéüÂ≠êÊÄß</h3>
<p>ÊòØÊåá‰∏Ä‰∏™Êìç‰ΩúÊàñËÄÖÂ§ö‰∏™Êìç‰ΩúË¶Å‰πàÂÖ®ÈÉ®ÊâßË°åÔºå‰∏îÊâßË°åÁöÑËøáÁ®ã‰∏ç‰ºöË¢´‰ªª‰ΩïÂõ†Á¥†ÊâìÊñ≠ÔºåË¶Å‰πàÂ∞±‰∏çÊâßË°å</p>
<h3 id="atomic-ÂåÖ">Atomic ÂåÖ</h3>
<p>‰∏ì‰∏∫Á∫øÁ®ãÂÆâÂÖ®ËÄåËÆæËÆ°ÔºåÂåÖÂê´Â§ö‰∏™ÂéüÂ≠êÊìç‰ΩúÁ±ª</p>
<p>Atomic Â∏∏Áî®Á±ª</p>
<ul>
<li>AtomicInteger</li>
<li>AtomicIntegerArray</li>
<li>AtomicBoolean</li>
<li>AtomicLong</li>
<li>AtomicLongArray</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AtomicIntegerSample</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="n">users</span> <span class="o">=</span> <span class="n">100</span><span class="o">;</span><span class="c1">//ÂêåÊó∂Ê®°ÊãüÁöÑÂπ∂ÂèëËÆøÈóÆÁî®Êà∑Êï∞Èáè
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="n">downTotal</span> <span class="o">=</span> <span class="n">50000</span><span class="o">;</span> <span class="c1">//Áî®Êà∑‰∏ãËΩΩÁöÑÁúüÂÆûÊÄªÊï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="kd">static</span> <span class="n">AtomicInteger</span> <span class="n">count</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AtomicInteger</span><span class="o">();</span><span class="c1">//ËÆ°Êï∞Âô®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//Ë∞ÉÂ∫¶Âô®ÔºåJDK1.5ÂêéÊèê‰æõÁöÑconcurrentÂåÖÂØπ‰∫éÂπ∂ÂèëÁöÑÊîØÊåÅ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">ExecutorService</span> <span class="n">executorService</span> <span class="o">=</span> <span class="n">Executors</span><span class="o">.</span><span class="na">newCachedThreadPool</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//‰ø°Âè∑ÈáèÔºåÁî®‰∫éÊ®°ÊãüÂπ∂ÂèëÁöÑ‰∫∫Êï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kd">final</span> <span class="n">Semaphore</span> <span class="n">semaphore</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Semaphore</span><span class="o">(</span><span class="n">users</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">downTotal</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="kd">final</span> <span class="n">Integer</span> <span class="n">index</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">executorService</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="c1">//ÈÄöËøáÂ§öÁ∫øÁ®ãÊ®°ÊãüN‰∏™Áî®Êà∑Âπ∂ÂèëËÆøÈóÆÂπ∂‰∏ãËΩΩ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">semaphore</span><span class="o">.</span><span class="na">acquire</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">                    <span class="n">add</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">                    <span class="n">semaphore</span><span class="o">.</span><span class="na">release</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="o">});</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="n">3000</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">executorService</span><span class="o">.</span><span class="na">shutdown</span><span class="o">();</span><span class="c1">//ÂÖ≥Èó≠Ë∞ÉÂ∫¶ÊúçÂä°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;‰∏ãËΩΩÊÄªÊï∞Ôºö&#34;</span> <span class="o">+</span> <span class="n">count</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//Á∫øÁ®ã‰∏çÂÆâÂÖ®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">add</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//count++
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">count</span><span class="o">.</span><span class="na">getAndIncrement</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="cas-ÁÆóÊ≥ï">CAS ÁÆóÊ≥ï</h3>
<ul>
<li>
<p>ÈîÅÊòØÁî®Êù•ÂÅöÂπ∂ÂèëÊúÄÁÆÄÂçïÁöÑÊñπÂºèÔºåÂΩìÁÑ∂ÂÖ∂‰ª£‰ª∑‰πüÊòØÊúÄÈ´òÁöÑ„ÄÇÁã¨Âç†ÈîÅÊòØ ‰∏ÄÁßçÊÇ≤ËßÇÈîÅÔºåsynchronizedÂ∞±ÊòØ‰∏ÄÁßçÁã¨Âç†ÈîÅÔºåÂÆÉÂÅáËÆæÊúÄÂùèÁöÑÊÉÖÂÜµÔºå Âπ∂‰∏îÂè™ÊúâÂú®Á°Æ‰øùÂÖ∂ÂÆÉÁ∫øÁ®ã‰∏ç‰ºöÈÄ†ÊàêÂπ≤Êâ∞ÁöÑÊÉÖÂÜµ‰∏ãÊâßË°åÔºå‰ºöÂØºËá¥ÂÖ∂ÂÆÉ ÊâÄÊúâÈúÄË¶ÅÈîÅÁöÑÁ∫øÁ®ãÊåÇËµ∑ÔºåÁ≠âÂæÖÊåÅÊúâÈîÅÁöÑÁ∫øÁ®ãÈáäÊîæÈîÅ„ÄÇ</p>
</li>
<li>
<p>ÊâÄË∞ì‰πêËßÇÈîÅÂ∞±ÊòØÔºåÊØèÊ¨°‰∏çÂä†ÈîÅËÄåÊòØÂÅáËÆæÊ≤°ÊúâÂÜ≤Á™ÅËÄåÂéªÂÆåÊàêÊüêÈ°πÊìç‰ΩúÔºåÂ¶ÇÊûúÂõ†‰∏∫ÂÜ≤Á™ÅÂ§±Ë¥•Â∞±ÈáçËØïÔºåÁõ¥Âà∞ÊàêÂäü‰∏∫Ê≠¢„ÄÇÂÖ∂‰∏≠CASÔºàÊØîËæÉ‰∏é‰∫§Êç¢ÔºåCompare And SwapÔºâ ÊòØ‰∏ÄÁßçÊúâÂêçÁöÑÊó†ÈîÅÁÆóÊ≥ï</p>
</li>
</ul>
<h3 id="atomicÁöÑÂ∫îÁî®Âú∫ÊôØ">AtomicÁöÑÂ∫îÁî®Âú∫ÊôØ</h3>
<p>ËôΩÁÑ∂Âü∫‰∫éCASÁöÑÁ∫øÁ®ãÂÆâÂÖ®Êú∫Âà∂ÂæàÂ•ΩÂæàÈ´òÊïàÔºå‰ΩÜË¶ÅËØ¥ÁöÑÊòØÔºåÂπ∂ÈùûÊâÄÊúâÁ∫øÁ®ãÂÆâÂÖ®ÈÉΩÂèØ‰ª•Áî®ËøôÊ†∑ÁöÑÊñπÊ≥ïÊù•ÂÆûÁé∞Ôºå ËøôÂè™ÈÄÇÂêà‰∏Ä‰∫õÁ≤íÂ∫¶ÊØîËæÉÂ∞èÂûã,Â¶ÇËÆ°Êï∞Âô®ËøôÊ†∑ÁöÑÈúÄÊ±ÇÁî®Ëµ∑Êù•ÊâçÊúâÊïàÔºåÂê¶Âàô‰πü‰∏ç‰ºöÊúâÈîÅÁöÑÂ≠òÂú®‰∫ÜÊ±ÇÁî®Ëµ∑Êù•ÊâçÊúâÊïàÔºåÂê¶Âàô‰πü‰∏ç‰ºöÊúâÈîÅÁöÑÂ≠òÂú®‰∫Ü</p>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/java%E5%B9%B6%E5%8F%91/">JavaÂπ∂Âèë</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
        <link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css"integrity="sha256-J&#43;iAE0sgH8QSz9hpcDxXIftnj65JEZgNhGcgReTTK9s="crossorigin="anonymous"
            ><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.js"integrity="sha256-InsNdER1b2xUewP&#43;pKCUJpkhiqwHgqiPXDlIk7GzBu4="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/auto-render.min.js"integrity="sha256-y39Mpg7V3D4lhBX4x6O0bUqTV4pSrfgwEfGKfxkOdgI="crossorigin="anonymous"
                defer
                >
            </script><script>
    window.addEventListener("DOMContentLoaded", () => {
        renderMathInElement(document.querySelector(`.article-content`), {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false },
                { left: "\\[", right: "\\]", display: true }
            ]
        });})
</script>
    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">Áõ∏ÂÖ≥ÊñáÁ´†</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="has-image">
    <a href="/p/%E7%B2%BE%E8%AF%BBjava%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%9A%84%E8%89%BA%E6%9C%AF%E5%9B%9B/">
        
        
            <div class="article-image">
                
                    <img src="https://img-1307890592.cos.ap-chengdu.myqcloud.com/typroa/Javaconcurrency.png" loading="lazy" data-key="" data-hash="https://img-1307890592.cos.ap-chengdu.myqcloud.com/typroa/Javaconcurrency.png"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Á≤æËØª„ÄäJavaÂπ∂ÂèëÁºñÁ®ãÁöÑËâ∫ÊúØ„Äã(Âõõ)</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/%E7%B2%BE%E8%AF%BBjava%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%9A%84%E8%89%BA%E6%9C%AF%E4%B8%89/">
        
        
            <div class="article-image">
                
                    <img src="https://img-1307890592.cos.ap-chengdu.myqcloud.com/typroa/Javaconcurrency.png" loading="lazy" data-key="" data-hash="https://img-1307890592.cos.ap-chengdu.myqcloud.com/typroa/Javaconcurrency.png"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Á≤æËØª„ÄäJavaÂπ∂ÂèëÁºñÁ®ãÁöÑËâ∫ÊúØ„Äã(‰∏â)</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/%E7%B2%BE%E8%AF%BBjava%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%9A%84%E8%89%BA%E6%9C%AF%E4%BA%8C/">
        
        
            <div class="article-image">
                
                    <img src="https://img-1307890592.cos.ap-chengdu.myqcloud.com/typroa/Javaconcurrency.png" loading="lazy" data-key="" data-hash="https://img-1307890592.cos.ap-chengdu.myqcloud.com/typroa/Javaconcurrency.png"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Á≤æËØª„ÄäJavaÂπ∂ÂèëÁºñÁ®ãÁöÑËâ∫ÊúØ„Äã(‰∫å)</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/%E7%B2%BE%E8%AF%BBjava%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%9A%84%E8%89%BA%E6%9C%AF%E4%B8%80/">
        
        
            <div class="article-image">
                
                    <img src="https://img-1307890592.cos.ap-chengdu.myqcloud.com/typroa/Javaconcurrency.png" loading="lazy" data-key="" data-hash="https://img-1307890592.cos.ap-chengdu.myqcloud.com/typroa/Javaconcurrency.png"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Á≤æËØª„ÄäJavaÂπ∂ÂèëÁºñÁ®ãÁöÑËâ∫ÊúØ„Äã(‰∏Ä)</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    <script src="https://utteranc.es/client.js" 
        repo="Kirov7/Blog-comment"
        issue-term="pathname"
        
        label="none"
        
        crossorigin="anonymous"
        async
        >
</script>

<style>
    .utterances {
        max-width: unset;
    }
</style>

<script>
    function setUtterancesTheme(theme) {
        let utterances = document.querySelector('.utterances iframe');
        if (utterances) {
            utterances.contentWindow.postMessage(
                {
                    type: 'set-theme',
                    theme: `github-${theme}`
                },
                'https://utteranc.es'
            );
        }
    }

    addEventListener('message', event => {
        if (event.origin !== 'https://utteranc.es') return;
        setUtterancesTheme(document.documentElement.dataset.scheme)
    });

    window.addEventListener('onColorSchemeChange', (e) => {
        setUtterancesTheme(e.detail)
    })
</script>


    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2022 - 
        
        2023 Êû´ÈòøÈõ®&#39;s Blog
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        ‰∏ªÈ¢ò <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.16.0">Stack</a></b> Áî± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> ËÆæËÆ°
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
